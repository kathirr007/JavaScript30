<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>JS30 |  Javascript DrumStick</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="keys">
		<div class="key" data-key="65"><kbd>A</kbd>
			<span class="sound">
				clap
			</span>
		</div>
		<div class="key" data-key="83"><kbd>S</kbd>
			<span class="sound">
				hihat
			</span>
		</div>
		<div class="key" data-key="68"><kbd>D</kbd>
			<span class="sound">
				kick
			</span>
		</div>
		<div class="key" data-key="70"><kbd>F</kbd>
			<span class="sound">
				openhat
			</span>
		</div>
		<div class="key" data-key="71"><kbd>G</kbd>
			<span class="sound">
				boom
			</span>
		</div>
		<div class="key" data-key="72"><kbd>H</kbd>
			<span class="sound">
				ride
			</span>
		</div>
		<div class="key" data-key="74"><kbd>J</kbd>
			<span class="sound">
				snare
			</span>
		</div>
		<div class="key" data-key="75"><kbd>K</kbd>
			<span class="sound">
				tom
			</span>
		</div>
		<div class="key" data-key="76"><kbd>L</kbd>
			<span class="sound">
				tink
			</span>
		</div>
	</div>

	<audio src="sounds/clap.wav" data-key="65"></audio>
	<audio src="sounds/HatRoll.aif.mp3" data-key="83"></audio>
	<audio src="sounds/kick-hat-inxs.wav.mp3" data-key="68"></audio>
	<audio src="sounds/opencym.aif.mp3" data-key="70"></audio>
	<audio src="sounds/boomy-dirty-kick.wav.mp3" data-key="71"></audio>
	<audio src="sounds/three_ride_hits.aif.mp3" data-key="72"></audio>
	<audio src="sounds/explosion_snare.aif.mp3" data-key="74"></audio>
	<audio src="sounds/17dirty_exploded_snare.aif.mp3" data-key="75"></audio>
	<audio src="sounds/echoing-tinkle-hit.wav.mp3" data-key="76"></audio>

	<script>
		function removeTransition(e) {
			if(e.propertyName !== 'transform') return; // skip it if it's not transform
			this.classList.remove('playing');
		}

		function playSound(e){
			const audio = document.querySelector(`audio[data-key='${e.keyCode}'`);
			const key = document.querySelector(`.key[data-key='${e.keyCode}'`);
			console.log(e.keyCode);
			if(!audio) return; // Stop the function
			audio.currentTime = 0;
			audio.play();
			key.classList.add("playing");
		}


		const keys = Array.from(document.querySelectorAll('.key'));
		keys.forEach(key => key.addEventListener('transitionend', removeTransition));

		window.addEventListener('keydown', playSound);

	</script>
</body>
</html>